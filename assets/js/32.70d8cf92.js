(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{520:function(_,t,v){"use strict";v.r(t);var r=v(4),a=Object(r.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h2",{attrs:{id:"规则影响参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#规则影响参数"}},[_._v("#")]),_._v(" 规则影响参数")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("resource：资源名，即限流规则的作用对象")])]),_._v(" "),v("li",[v("p",[_._v("count: 用户设置的阈值，根据不同的策略分别表示最大RT、异常比例阈值、异常数阈值")])]),_._v(" "),v("li",[v("p",[_._v("grade: 降级策略 0:慢调用比例 1:异常比例 2:异常数量")])]),_._v(" "),v("li",[v("p",[_._v("timeWindow : 熔断时长 ,"),v("strong",[_._v("单位秒")])])]),_._v(" "),v("li",[v("p",[_._v("minRequestAmount : 最小请求数，默认为5")])]),_._v(" "),v("li",[v("p",[_._v("slowRatioThreshold :  慢调用比率阈值，默认为1.0")])]),_._v(" "),v("li",[v("p",[_._v("statIntervalMs ： 熔断时长，默认为1秒 ，"),v("strong",[_._v("单位毫秒")])])])]),_._v(" "),v("h2",{attrs:{id:"熔断状态"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#熔断状态"}},[_._v("#")]),_._v(" 熔断状态")]),_._v(" "),v("p",[_._v("熔断有三种状态，分别为OPEN、HALF_OPEN、CLOSED。")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("状态")]),_._v(" "),v("th",[_._v("说明")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("OPEN")]),_._v(" "),v("td",[_._v("表示熔断开启，拒绝所有请求")])]),_._v(" "),v("tr",[v("td",[_._v("HALF_OPEN")]),_._v(" "),v("td",[_._v("探测恢复状态，如果接下来的一个请求顺利通过则结束熔断，否则继续熔断")])]),_._v(" "),v("tr",[v("td",[_._v("CLOSED")]),_._v(" "),v("td",[_._v("表示熔断关闭，请求顺利通过")])])])]),_._v(" "),v("h2",{attrs:{id:"熔断策略-（grade）"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#熔断策略-（grade）"}},[_._v("#")]),_._v(" 熔断策略 （grade）")]),_._v(" "),v("p",[_._v("熔断降级支持慢调用比例、异常比例、异常数三种熔断策略。")]),_._v(" "),v("h3",{attrs:{id:"_1-慢调用比例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-慢调用比例"}},[_._v("#")]),_._v(" 1.慢调用比例")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("最大RT")]),_._v(" "),v("td",[_._v("需要设置的阈值，超过该值则为慢应用")])]),_._v(" "),v("tr",[v("td",[_._v("比例阈值")]),_._v(" "),v("td",[_._v("慢调用占所有的调用的比率，范围：[0~1]")])]),_._v(" "),v("tr",[v("td",[_._v("熔断时长")]),_._v(" "),v("td",[_._v("在这段时间内发生熔断、拒绝所有请求")])]),_._v(" "),v("tr",[v("td",[_._v("最小请求数")]),_._v(" "),v("td",[_._v("即允许通过的最小请求数，在该数量内不发生熔断")])])])]),_._v(" "),v("h4",{attrs:{id:"执行逻辑"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#执行逻辑"}},[_._v("#")]),_._v(" 执行逻辑")]),_._v(" "),v("p",[v("strong",[_._v("熔断（OPEN）：")])]),_._v(" "),v("p",[_._v("请求数大于最小请求数并且慢调用的比率大于比例阈值则发生熔断，熔断时长为用户自定义设置。")]),_._v(" "),v("p",[v("strong",[_._v("探测（HALFOPEN）：")])]),_._v(" "),v("ul",[v("li",[v("p",[_._v("当熔断过了定义的熔断时长，状态由熔断（OPEN）变为探测（HALFOPEN）。")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求小于最大RT，说明慢调用已经恢复，结束熔断，状态由探测（HALF_OPEN）变更为关闭（CLOSED）")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求大于最大RT，说明慢调用未恢复，继续熔断，熔断时长保持一致")])])]),_._v(" "),v("h3",{attrs:{id:"_2-异常比例"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-异常比例"}},[_._v("#")]),_._v(" 2.异常比例")]),_._v(" "),v("p",[_._v("通过计算异常比例与设置阈值对比的一种策略。")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("异常比例阈值")]),_._v(" "),v("td",[_._v("异常比例=发生异常的请求数÷请求总数取值范围：[0~1]")])]),_._v(" "),v("tr",[v("td",[_._v("熔断时长")]),_._v(" "),v("td",[_._v("在这段时间内发生熔断、拒绝所有请求")])]),_._v(" "),v("tr",[v("td",[_._v("最小请求数")]),_._v(" "),v("td",[_._v("即允许通过的最小请求数，在该数量内不发生熔断")])])])]),_._v(" "),v("h4",{attrs:{id:"执行逻辑-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#执行逻辑-2"}},[_._v("#")]),_._v(" 执行逻辑")]),_._v(" "),v("p",[v("strong",[_._v("熔断（OPEN）：")])]),_._v(" "),v("p",[_._v("当请求数大于最小请求并且异常比例大于设置的阈值时触发熔断，熔断时长由用户设置。")]),_._v(" "),v("p",[v("strong",[_._v("探测（HALFOPEN）：")])]),_._v(" "),v("ul",[v("li",[v("p",[_._v("当超过熔断时长时，由熔断（OPEN）转为探测（HALFOPEN）")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求未发生错误，说明应用恢复，结束熔断，状态由探测（HALF_OPEN）变更为关闭（CLOSED）")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求继续发生错误，说明应用未恢复，继续熔断，熔断时长保持一致")])])]),_._v(" "),v("h3",{attrs:{id:"_3-异常数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-异常数"}},[_._v("#")]),_._v(" 3.异常数")]),_._v(" "),v("p",[_._v("通过计算发生异常的请求数与设置阈值对比的一种策略。")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[v("strong",[_._v("属性")])]),_._v(" "),v("th",[v("strong",[_._v("说明")])])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("异常数")]),_._v(" "),v("td",[_._v("请求发生异常的数量")])]),_._v(" "),v("tr",[v("td",[_._v("熔断时长")]),_._v(" "),v("td",[_._v("在这段时间内发生熔断、拒绝所有请求")])]),_._v(" "),v("tr",[v("td",[_._v("最小请求数")]),_._v(" "),v("td",[_._v("即允许通过的最小请求数，在该数量内不发生熔断")])])])]),_._v(" "),v("h4",{attrs:{id:"执行逻辑-3"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#执行逻辑-3"}},[_._v("#")]),_._v(" 执行逻辑")]),_._v(" "),v("p",[v("strong",[_._v("熔断（OPEN）：")])]),_._v(" "),v("p",[_._v("当请求数大于最小请求并且异常数量大于设置的阈值时触发熔断，熔断时长由用户设置。")]),_._v(" "),v("p",[v("strong",[_._v("探测（HALFOPEN）")]),_._v("：")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("当超过熔断时长时，由熔断（OPEN）转为探测（HALFOPEN）")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求未发生错误，说明应用恢复，结束熔断，状态由探测（HALF_OPEN）变更为关闭（CLOSED）")])]),_._v(" "),v("li",[v("p",[_._v("如果接下来的一个请求继续发生错误，说明应用未恢复，继续熔断，熔断时长保持一致")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);